import streamlit as st
import extra_streamlit_components as stx
from streamlit_cookies_manager import EncryptedCookieManager
from register import register
from login import login

import os
from dotenv import load_dotenv


# Main function to control the app flow
def main():
    load_dotenv()

    api_endpoint = os.getenv("API_ENDPOINT")
    cookies_password = os.getenv("COOKIES_PASSWORD")

    if not api_endpoint:
        print("API_ENDPOINT is not defined in the .env file.")
        return
    
    if not cookies_password:
        print("COOKIES_PASSWORD is not defined in the .env file.")
        return
    

    with st.sidebar:
        st.title("Navigation")
        page = st.sidebar.radio("Go to", ("Register", "Login"))

    if page == "Login":
        login()
    elif page == "Register":
        register()

if __name__ == "__main__":
    main()
