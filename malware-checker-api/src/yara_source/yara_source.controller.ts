import { Body, Controller, Post, UseGuards } from '@nestjs/common';
import { JwtGuard } from '../auth/guard';
import { GetUser } from '../auth/decorator';
import { YaraSourceService } from './yara_source.service';
import { SubscribeUserDto } from './dto/subscribe.user.dto';

@Controller('yara-source')
@UseGuards(JwtGuard)
export class YaraSourceController {
    constructor(private yaraSourceService: YaraSourceService) {}

    @Post('subscribe-to-source')
    subscribeToSource(@GetUser('email') email: string, @Body() dto: SubscribeUserDto) {
        return this.yaraSourceService.subscribeUserToYaraSource(email, dto.sourceId)
    }

    @Post('unsubscribe-to-source')
    unsubscribeToSource(@GetUser('email') email: string, @Body() dto: SubscribeUserDto) {
        return this.yaraSourceService.unsubscribeUserToYaraSource(email, dto.sourceId)
    }
}
