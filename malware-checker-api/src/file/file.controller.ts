import { Controller, Post, UploadedFile, UseGuards, UseInterceptors } from '@nestjs/common';
import { JwtGuard } from '../auth/guard';
import { FileInterceptor } from '@nestjs/platform-express';
import { FileService } from './file.service';
import { storage } from './storage.config';

const MAX_FILE_SIZE = 100 * 1024 * 1024 // 100 MB

@Controller('files')
@UseGuards(JwtGuard)
export class FileController {
    constructor(private fileService: FileService) {}

    @Post('upload')
    @UseInterceptors(FileInterceptor('file', {
        storage: storage,
        limits: {
            fileSize: MAX_FILE_SIZE
        }
    }))
    uploadFile(@UploadedFile()
        file: Express.Multer.File) {

        return {'': ""}
    }
}
